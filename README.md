<script language="JavaScript">
<!--
document.writeln("动态更换APP桌面图标");
document.writeln("准备工作：多套Launcher图标（本例中另外添加了ic_launcher_1111和ic_launcher_1212两套启动图标）");
document.writeln("实现原理：通过设置启动组件显示、隐藏桌面图标以达到目的。在Manifest.xml中体现在enabled属性上，");
document.writeln("         在代码中是通过PackageManager的setComponentEnabledSetting（）方法控制");
document.writeln("实现步骤：");
document.writeln("   1.在Manifest.xml的application节点下配置启动标签");
document.writeln("       <activity-alias");
document.writeln("           android:name=/".MainActivity1111/"");
document.writeln("           android:label=/"@string/app_name/"");
document.writeln("           android:enabled=/"false/"");
document.writeln("           android:icon=/"@mipmap/ic_launcher_1111/"");
document.writeln("           android:targetActivity=/".MainActivity/" >");
document.writeln("           <intent-filter>");
document.writeln("               <action android:name=/"android.intent.action.MAIN/"/>");
document.writeln("                <category android:name=/"android.intent.category.LAUNCHER/"/>");
document.writeln("           </intent-filter>");
document.writeln("       </activity-alias>");
document.writeln("        <activity-alias");
document.writeln("           android:name=/".MainActivity1212/"");
document.writeln("           android:label=/"@string/app_name/"");
document.writeln("           android:enabled=/"false/"");
document.writeln("           android:icon=/"@mipmap/ic_launcher_1212/"");
document.writeln("           android:targetActivity=/".MainActivity/" >");
document.writeln("           <intent-filter>");
document.writeln("               <action android:name=/"android.intent.action.MAIN/"/>");
document.writeln("                <category android:name=/"android.intent.category.LAUNCHER/"/>");
document.writeln("           </intent-filter>");
document.writeln("       </activity-alias>");
document.writeln("    2.更换桌面图标方法，通过PackageManager的setComponentEnabledSetting（）方法设置启动组件显示和隐藏");
document.writeln("   本例中的更换桌面图标方法：");
document.writeln("       kotlin写法");
document.writeln("       fun changeLauncherIcon(activity: Activity, newComponentName: ComponentName) {");
document.writeln("           var packageManager: PackageManager = activity.packageManager");
document.writeln("           packageManager.setComponentEnabledSetting(activity.componentName,");
document.writeln("                   PackageManager.COMPONENT_ENABLED_STATE_DISABLED,");
document.writeln("                   PackageManager.DONT_KILL_APP)");
document.writeln("           packageManager.setComponentEnabledSetting(newComponentName,");
document.writeln("                   PackageManager.COMPONENT_ENABLED_STATE_ENABLED,");
document.writeln("                   PackageManager.DONT_KILL_APP)");
document.writeln("       }");
document.writeln("       Java写法");
document.writeln("       public static void changeLauncherIcon(Activity activity, ComponentName newComponentName){");
document.writeln("           PackageManager packageManager = activity.getPackageManager;");
document.writeln("           packageManager.setComponentEnabledSetting(activity.componentName,");
document.writeln("                   PackageManager.COMPONENT_ENABLED_STATE_DISABLED,");
document.writeln("                   PackageManager.DONT_KILL_APP);");
document.writeln("           packageManager.setComponentEnabledSetting(newComponentName,");
document.writeln("                   PackageManager.COMPONENT_ENABLED_STATE_ENABLED,");
document.writeln("                   PackageManager.DONT_KILL_APP);");
document.writeln("       }");
document.writeln("   3.通过事件触发更换桌面图标方法（建议通过访问服务端的方法触发）");
document.writeln("   本例在MainActivity的按钮事件中调用更换桌面图标方法changeLauncherIcon（）");
document.writeln("    具体请看Demo，Demo为kotlin写法");
document.writeln("知识点：");
document.writeln("   1.关于Manifest.xml属性说明");
document.writeln("   name            可任意取值，只要能保证是唯一标识即可，为了方便管理建议有规律一些");
document.writeln("   targetActivity	这个属性的值就是代表指向的是哪个Activity，而这个标签本身代表是该Activity的别名，");
document.writeln("   记得指向的Activity要在该标签之前申明，否则可能运行不起来");
document.writeln("   icon	        指的是该别名对应的应用图标");
document.writeln("   label	        指的是该别名对应的应用名字");
document.writeln("   enabled	        默认是true，true就会显示在桌面上，这里为了保证桌面只显示一个图标，则中的属性都");
document.writeln("   是false，而在之后代码中动态控制这个属性，来显示和隐藏对应的图标");
document.writeln("   2.kotlin中使用databing");
document.writeln("   需要在app的build.gradle中添加以下配置");
document.writeln("   android{");
document.writeln("       ……");
document.writeln("       kapt {");
document.writeln("           generateStubs = true");
document.writeln("       }");
document.writeln("   }");
document.writeln("    dependencies {");
document.writeln("       ……");
document.writeln("       kapt /"com.android.databinding:compiler:3.0.1/"");
document.writeln("   }");
document.writeln("现：");
document.writeln(".更换桌面图标不是马上生效，需要一段时间才生效（10S内）");
document.writeln(".当app不是默认图标时，再run 'app'，就会报错 'Session /"app/":Error Launching activity'");
//-->
</script>
